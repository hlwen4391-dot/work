# battle
battle


# battle
battle


### 20251201
1.else if 只能跟在 if 后面，不能跟在普通语句后面
2.作用域的作用与应用场景
3.创建对象（实例）
  const a = new 类名(...)
4.super的使用方法
  super() → 调用父类构造函数
  super.xxx → 调用父类的方法或属性
  没有 super，子类无法正确继承父类的内容
5.暴击逻辑：攻击*2-防御=伤害  生命值（hp）-伤害=现hp

### 20251202
function:function 语句是 JavaScript 中用于 声明一个函数 的语句，用来封装一段可以重复执行的代码
    function 函数名(参数1, 参数2, ...) {
  // 函数体：执行的代码
  return 返回值;  // 可选
}

sort：数组遍历
三元表达式（条件运算符）：条件 ? 表达式1 : 表达式2
意思是：
如果条件为 true → 用表达式1
否则 → 用表达式2

indexOf() 用来找某个元素在数组中的下标。

splice(start, deleteCount) 的意思是：
从 start 下标开始
删除 deleteCount 个元素


###20251203
战斗回放
在原有代码上里面加入每个人物攻击都有一个时间间断的概念，后续还要有一个技能的模块（先不管）



###20251204
.filter(...) 会遍历数组，并保留符合条件的元素。


编写一个战斗系统：
1.名字、生命值、攻击、防御、速度、随机概率暴击、随机概率miss、免伤率、攻击间隔（前摇、后摇）、技能、（后续要有buff，debuff的添加）
2.多人随机战斗（两个阵营pk），且速度快的优先进攻，真实时间驱动，战斗回放功能。

deltaTime,基于此代码上修改整个游戏引擎。
将普通攻击放入技能系列中。
async:异步函数。

###20251208
1.添加了buff系统
2.ActionSystem中攻击逻辑有问题（眩晕之后就不需要去找人攻击了）
3.技能优先级有问题，永远释放的是普通攻击，没有技能释放。


###20251209
修改了之前的遗留问题，技能优先级处理完了，被眩晕目标也不会再去找人攻击了，
还是技能优先的进攻逻辑（已是正确的dataTime）重构了buff系统，设置了一个全局的TeamRes，方便skill释放找到阵营
也就是说以后群体技能可以方便找到敌方和己方阵营。
调试buff、技能系统，新添加技能和buff都能正常运行。
问题：速度（speed）的修改不会实时更新 attackInterval
    狂暴（rageSkill）属性永久增加（必须修）
    speed 变化不更新 attackInterval（必须修）
    TeamRef 与 battleRTS 使用不同数组（群体战吼失效）
    normalAttack 使用 Math.random 而非 seed rand（可复现性失效）
    免伤计算被 Math.floor 破坏（所有免伤都会变成 0 或 100%）
    SkillEnum 缺失 warCry
    pickRandomTarget 当队伍空时会 crash
    未来的沉默、封技机制无法扩展（逻辑未实现）


###20251210
EventEmitter 是一种事件驱动机制，让你的代码可以：
发出事件（emit）
监听事件（on/subscribe）
取消事件（off/unsubscribe）
就是一个“通知系统 + 回调系统”

行为树的结构类型：
Selector（选择节点），从上到下依次尝试子节点，只要有一个成功，就停止。
Sequence（顺序节点），必须从上到下全部成功，任何一步失败，都算失败。
Condition（条件节点），判断某个条件
Action（行为节点），执行具体动作：施放技能、普通攻击、走到某位置、加血、逃跑
Decorator（修饰节点），用于反转、循环、等待等逻辑，

任务：
基于现在的代码，将各个类、功能、技能等都组件化，精简代码，增大系统的延展性。